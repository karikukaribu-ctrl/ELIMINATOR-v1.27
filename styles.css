:root{
  --bg:#fbf4e8;
  --fg:#14120f;
  --muted:#6a5d53;

  --accentSoft: rgba(211,138,92,.22);

  --font-ui: "Zen Maru Gothic", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --font-title: "Baloo 2", cursive;

  /* Tout le reste de l’app */
  body, button, input, select, textarea{
  font-family: var(--font-ui);
  }

  /* Le gros titre uniquement */
 #appTitle{
  font-family: var(--font-title);
  font-weight: 900;
  }
  /* barre : pas grise, plus chaude */
  --barEmpty: rgba(255, 210, 165, .28);
  --barFill: rgba(211,138,92,.92);
  --barEdge: rgba(255,255,255,.82);

  --line: rgba(0,0,0,.10);
  --panelBg: rgba(255,255,255,.70);

  --leftW:360px;
  --rightW:420px;

  /* taille globale (au lieu de transform scale sur body) */
  --baseSize: 16px;
}

/* ---------- Base ---------- */
*{ box-sizing:border-box; }

html, body{ height:100%; }

html{ font-size: var(--baseSize); }

body{
  margin:0;
  background: var(--bg);
  color: var(--fg);
  font-family: "Yomogi", cursive;
}

body[data-font="yomogi"]{ font-family: "Yomogi", cursive; }
body[data-font="zen"]{ font-family: "Zen Kurenaido", sans-serif; }
body[data-font="kiwi"]{ font-family: "Kiwi Maru", serif; }

.muted{ color: var(--muted); }
.small{ font-size: 12px; }

/* ---------- Topbar fixe ---------- */
#topBar{
  position: fixed;
  top:0; left:0; right:0;
  height:56px;
  z-index: 4000;

  display:grid;
  grid-template-columns: 1fr auto 1fr;
  align-items:center;

  padding: 0 12px;
  background: rgba(255,255,255,.62);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--line);
}

.tb-left{ justify-self:start; }
.tb-center{ justify-self:center; }
.tb-right{ justify-self:end; }

.tb-brand{
  font-size: 14px;
  letter-spacing: .04em;
  color: var(--muted);
}

.tb-btn{
  border: 1px solid var(--line);
  background: rgba(255,255,255,.35);
  border-radius: 10px;
  width: 44px;
  height: 36px;
  cursor:pointer;
  font-family: inherit;
  font-size: 18px;
}
#topBar{
  z-index: 4000; /* ↓ */
}

.panel{
  z-index: 6000; /* ↑ */
}

#panelBack{
  z-index: 5900;
}
/* ---------- Hub ---------- */
#hub{
  min-height: 100vh;
  padding-top: 56px;
  display:flex;
  justify-content:center;
}

#hub-inner{
  width: min(980px, 94vw);
  padding: 44px 18px 56px;
  text-align:center;
}

/* Titre : plus gras */
#appTitle{
  font-family: "Baloo 2", cursive;
  font-size: clamp(72px, 8vw, 112px);
  font-weight: 900;
  letter-spacing: .06em;
}

#subtitle{
  margin: 0 0 26px;
  color: var(--muted);
  font-size: 15px;
}

/* ---------- Progression (encore plus haute) ---------- */
#progressWrap{
  margin: 0 auto 18px;
  width: 100%;
}

#progressBar{
  position: relative;
  width: 100%;
  height: 104px; /* ↑ plus haut */
  border-radius: 26px;
  overflow: hidden;
  background: var(--barEmpty);
  border: 1px solid var(--line);
}
.progressBar{
  height: 34px;              /* ↑ plus haute */
  border-radius: 999px;
  background: var(--barA);
  border: 2px solid rgba(255,255,255,.65);   /* délimitation claire */
  box-shadow: 0 10px 24px rgba(0,0,0,.10);   /* léger, pas halo énorme */
  position: relative;
  overflow: hidden;
}

.progressFill{
  height: 100%;
  background: var(--barB);   /* évite le noir pur : barB doit être brun/ardoise */
  border-radius: 999px;
  transition: width .35s ease;
}

.progressPct{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  font-weight: 900;
  font-size: 14px;
  color: rgba(255,255,255,.85); /* discret, lisible */
  mix-blend-mode: normal;
  pointer-events:none;
}
#progressFill{
  position:absolute;
  top:0; left:0; bottom:0;
  width: 100%;
  background:
    linear-gradient(180deg, rgba(255,255,255,.26), transparent 55%),
    linear-gradient(90deg, var(--barFill), rgba(255,255,255,.14));
  box-shadow: inset -5px 0 0 var(--barEdge);
  transition: width .55s cubic-bezier(.2,.8,.2,1);
}

#progressPctIn{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size: 16px; /* plus discret */
  font-weight: 700;
  color: rgba(255,255,255,.92);
  text-shadow: 0 2px 10px rgba(0,0,0,.22);
  pointer-events:none;
}

/* ---------- Pomodoro ---------- */
#pomodoro{
  margin: 12px 0 22px;
  display:flex;
  justify-content:center;
}

.pomoRow{
  display:flex;
  align-items:center;
  gap: 10px;
}

#pomoTime{
  font-size: 30px;
  letter-spacing: .02em;
  font-weight: 700;
}

.iconLink{
  border:none;
  background: transparent;
  cursor:pointer;
  font-family: inherit;
  font-size: 18px;
  color: var(--muted);
  padding: 2px 6px;
  line-height: 1;
}

/* ---------- Tâche en cours ---------- */
#currentTask{
  margin: 6px 0 22px;
}
.bottomCard{
  margin-top: 18px;
  background: var(--card);
  border: 1px solid rgba(0,0,0,.08);
  border-radius: 18px;
  padding: 14px 14px 10px;
  backdrop-filter: blur(10px);
}

.bottomHeader{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:12px;
  margin-bottom: 10px;
}

.bottomTitle{
  font-weight: 900;
  font-size: 22px;
  letter-spacing: .01em;
  text-shadow: 0 2px 0 rgba(255,255,255,.5);
}

.bottomMeta{
  font-weight: 700;
  opacity: .70;
}

.quickLinks{
  display:flex;
  gap:10px;
  flex-wrap: wrap;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid rgba(0,0,0,.08);
}

.ql{
  border:none;
  background: rgba(255,255,255,.35);
  padding: 8px 10px;
  border-radius: 999px;
  font-weight: 800;
  cursor:pointer;
}
.ql:hover{ background: rgba(255,255,255,.55); }
.taskLine{
  display:flex;
  justify-content:center;
  gap: 10px;
  align-items: center;
  margin-bottom: 8px;
}

.taskLabel{
  font-size: 13px;
  color: var(--muted);
}

.taskFraction{
  font-size: 13px;
  color: var(--muted);
  border: 1px solid var(--line);
  background: rgba(255,255,255,.35);
  border-radius: 999px;
  padding: 2px 8px;
}

.tinyBtn{
  width: 26px;
  height: 26px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.35);
  cursor:pointer;
  font-family: inherit;
  font-size: 13px;
  color: var(--muted);
}

/* tâche sélectionnée : plus gras */
.taskTitle{
  font-size: clamp(34px, 3.6vw, 50px);
  font-weight: 900;
  line-height: 1.10;
  margin: 6px 0 0;
  text-shadow: 0 12px 20px rgba(0,0,0,.11);
}

.taskMeta{
  margin-top: 10px;
}

/* ---------- Actions + labels ---------- */
#actions{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr;
  align-items:start;
}

.actionCol{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap: 8px;
  min-width: 160px;
}

.actionLbl{
  font-size: 12px;
  color: var(--muted);
}

/* Boutons ronds */
.roundBtn{
  width: 70px;
  height: 70px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.45);
  cursor:pointer;
  font-family: inherit;
  font-size: 26px;
  display:flex;
  align-items:center;
  justify-content:center;
  transition: transform 160ms ease;
}
.roundBtn:active{ transform: translateY(1px) scale(.99); }

.roundBtn.ghost{ background: rgba(255,255,255,.30); }
.roundBtn.primary{
  background: rgba(211,138,92,.18);
  border-color: rgba(211,138,92,.30);
}

/* ---------- Roulette (texte centré, plus stable) ---------- */
.rouletteBtn{
  width: 172px;
  height: 172px;
  border-radius: 999px;
  border: 2px solid rgba(211,138,92,.55);
  background: rgba(255,255,255,.35);
  cursor:pointer;
  font-family: inherit;
  position: relative;
  display:grid;
  place-items:center;
  overflow: visible;
  transition: transform 180ms ease;
}
.rouletteWrap{ display:flex; flex-direction:column; align-items:center; gap:6px; }

.rouletteBtn{
  width: 140px;
  height: 140px;
  border: none;
  background: transparent;
  padding: 0;
  cursor: pointer;
}

.rouletteWheel{
  width: 140px;
  height: 140px;
  border-radius: 999px;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.55), transparent 55%),
    radial-gradient(circle at 70% 70%, rgba(0,0,0,.06), transparent 55%),
    linear-gradient(135deg, rgba(235,170,115,.55), rgba(255,245,228,.7));
  border: 2px solid rgba(0,0,0,.10);
  box-shadow: 0 10px 26px rgba(0,0,0,.08);
  display:grid;
  place-items:center;
  transform: rotate(0deg);
  will-change: transform;
}

.rouletteCenterText{
  font-weight: 800;
  font-size: 18px;
  letter-spacing: .02em;
  color: rgba(20,18,15,.80);
  text-shadow: 0 2px 0 rgba(255,255,255,.55);
}

.rouletteLegend{
  font-size: 14px;
  font-weight: 700;
  opacity: .78;
}

.rouletteFace{
  width: 152px;
  height: 152px;
  border-radius: 999px;
  display:block;
  border: 1px solid rgba(0,0,0,.08);
  background:
    conic-gradient(
      from 0deg,
      rgba(211,138,92,.34) 0 20deg,
      rgba(255,255,255,.56) 20deg 40deg,
      rgba(211,138,92,.26) 40deg 60deg,
      rgba(255,255,255,.48) 60deg 80deg,
      rgba(211,138,92,.30) 80deg 100deg,
      rgba(255,255,255,.52) 100deg 120deg,
      rgba(211,138,92,.28) 120deg 140deg,
      rgba(255,255,255,.50) 140deg 160deg,
      rgba(211,138,92,.32) 160deg 180deg,
      rgba(255,255,255,.55) 180deg 200deg,
      rgba(211,138,92,.26) 200deg 220deg,
      rgba(255,255,255,.48) 220deg 240deg,
      rgba(211,138,92,.30) 240deg 260deg,
      rgba(255,255,255,.52) 260deg 280deg,
      rgba(211,138,92,.28) 280deg 300deg,
      rgba(255,255,255,.50) 300deg 320deg,
      rgba(211,138,92,.32) 320deg 340deg,
      rgba(255,255,255,.54) 340deg 360deg
    );
  box-shadow:
    inset 0 10px 18px rgba(255,255,255,.35),
    inset 0 -12px 20px rgba(0,0,0,.06);
  transform: rotate(0deg);
  will-change: transform;
}

.rouletteCenter{
  position:absolute;
  width: 92px;
  height: 92px;
  border-radius: 999px;
  background: rgba(255,255,255,.70);
  border: 1px solid rgba(0,0,0,.08);
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow: 0 12px 24px rgba(0,0,0,.07);
}

.rouletteWord{
  font-size: 14px;
  letter-spacing: .10em;
  color: rgba(0,0,0,.72);
  text-transform: lowercase;
  transform: translateY(1px);
}

.rouletteNeedle{
  position:absolute;
  top: -6px;
  width: 0;
  height: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-bottom: 18px solid rgba(0,0,0,.18);
  filter: drop-shadow(0 6px 8px rgba(0,0,0,.10));
}

/* ---------- Toast ---------- */
.toast{
  margin: 16px auto 0;
  max-width: 560px;
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(255,255,255,.55);
  border: 1px solid var(--line);
  color: rgba(0,0,0,.70);
}

/* ---------- Panels (FIXÉS + z-index correct) ---------- */
#panelBack{
  position: fixed;
  inset: 0;
  z-index: 4000;
  background: rgba(0,0,0,.22);
  opacity: 0;
  pointer-events:none;
  transition: opacity .25s ease;
}
#panelBack.show{
  opacity: 1;
  pointer-events:auto;
}
.panel-content{
  color: rgba(0,0,0,.78);
}
.panel{
  position: fixed;
  top: 0;
  bottom: 0;
  z-index: 4500;
  background: var(--panelBg);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border: 1px solid var(--line);
  overflow:auto;
  transition: transform .25s ease;
  display:flex;
  flex-direction:column;
}

.panel-left{
  left:0;
  width: var(--leftW);
  transform: translateX(-110%);
  border-right: 1px solid var(--line);
}

.panel-right{
  right:0;
  width: var(--rightW);
  transform: translateX(110%);
  border-left: 1px solid var(--line);
}

.panel.open{ transform: translateX(0); }

.panel-top{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding: 10px 12px;
  border-bottom: 1px solid var(--line);
}

.panel-title{
  color: var(--muted);
  letter-spacing: .04em;
  font-size: 13px;
}

.closeBtn{
  width: 40px;
  height: 36px;
  border-radius: 10px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.35);
  cursor:pointer;
  font-size: 18px;
  font-family: inherit;
}

.panel-tabs{
  display:flex;
  gap: 8px;
  padding: 10px 10px 0;
  flex-wrap: wrap;
}

.tabBtn{
  border:none;
  background: transparent;
  padding: 6px 8px;
  color: rgba(0,0,0,.72);
}

.tabBtn.active{
  background: rgba(211,138,92,.22);
  border-radius: 999px;
  font-weight: 700;
}

.panel-content{
  padding: 14px 12px 18px;
  overflow:auto;
}

/* Tab pages */
.tabPage{ display:none; }
.tabPage.show{ display:block; }

.divider{
  height:1px;
  background: var(--line);
  margin: 12px 0;
  opacity:.8;
}

/* Inputs */
.area{
  width: 100%;
  border-radius: 14px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.40);
  padding: 10px;
  font-family: inherit;
  resize: vertical;
}

.input, .select{
  border-radius: 999px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.40);
  padding: 8px 10px;
  font-family: inherit;
}

.row{
  display:flex;
  gap: 10px;
  align-items:center;
  margin-top: 10px;
}
.row.wrap{ flex-wrap: wrap; }

/* Buttons */
.btn{
  border-radius: 999px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.35);
  padding: 8px 12px;
  cursor:pointer;
  font-family: inherit;
}
.btn.primary{
  background: rgba(211,138,92,.22);
  border-color: rgba(211,138,92,.35);
}
.btn.ghost{
  background: rgba(255,255,255,.25);
}
.btn.danger{
  background: rgba(255,120,120,.20);
  border-color: rgba(255,120,120,.35);
}

/* Lists */
.list{
  display:flex;
  flex-direction:column;
  gap: 8px;
  margin-top: 10px;
}

.cardRow{
  border: 1px solid var(--line);
  background: rgba(255,255,255,.34);
  border-radius: 14px;
  padding: 10px 10px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
}

.cardLeft{
  display:flex;
  flex-direction:column;
  gap: 2px;
  min-width: 0;
}
.cardTitle{
  font-weight: 900;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.cardSub{
  font-size: 12px;
  color: var(--muted);
}

.cardBtns{
  display:flex;
  gap: 8px;
}
.iconBtn{
  width: 36px;
  height: 34px;
  border-radius: 10px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.30);
  cursor:pointer;
  font-family: inherit;
}
.iconBtn:active{ transform: translateY(1px); }

.grid2{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}
