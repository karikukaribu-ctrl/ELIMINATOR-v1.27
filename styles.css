/* styles.css — ELIMINATOR (Étape 2 améliorée) */

/* ===== Reset & variables ===== */
:root{
  --bg:#FBF4E8;
  --fg:#14120F;
  --muted:rgba(20,18,15,.62);

  --card:rgba(255,255,255,.76);
  --card2:rgba(255,255,255,.52);
  --line:rgba(20,18,15,.12);

  --accent:rgba(205,120,60,.22);
  --accent2:rgba(205,120,60,.64);

  --barTrack:rgba(255,215,170,.60);
  --barFill:rgba(205,120,60,.88);
  --barEdge:rgba(255,255,255,.78);

  --glass: rgba(255,255,255,.52);
  --glass2: rgba(255,255,255,.38);

  --uiFont: "Quicksand", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --titleFont: "Baloo 2", cursive;

  --contrastBoost: 1.02;
  --barH: 44px;

  --leftW: 420px;
  --rightW: 560px;

  --radius: 18px;
  --radius2: 24px;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: var(--uiFont);
  background: var(--bg);
  color: var(--fg);
  filter: contrast(var(--contrastBoost));
  overflow-x:hidden;
}

.srOnly{
  position:absolute;
  width:1px;height:1px;
  padding:0;margin:-1px;
  overflow:hidden;clip:rect(0,0,0,0);
  white-space:nowrap;border:0;
}

/* ===== Topbar (fixed, glass) ===== */
.topbar{
  position:fixed;
  top:0; left:0; right:0;
  height: 92px;
  display:grid;
  grid-template-columns: 120px 1fr 120px;
  align-items:center;
  padding: 10px 14px;
  z-index: 4000;

  background: linear-gradient(180deg, var(--glass), var(--glass2));
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  border-bottom: 1px solid var(--line);
}

.topbar__left, .topbar__right{
  display:flex;
  align-items:center;
  gap:10px;
}

.topbar__right{
  justify-content:flex-end;
}

.brand{
  text-align:center;
  line-height:1.0;
  user-select:none;
}
.brand__title{
  font-family: var(--titleFont);
  font-weight: 900;
  letter-spacing: .06em;
  font-size: clamp(64px, 7.2vw, 110px);
  margin-top: 6px;
}
.brand__subtitle{
  margin-top: 6px;
  font-weight: 700;
  color: rgba(20,18,15,.70);
}

/* darker subtitle in dark mode handled by theme in JS */

.iconBtn{
  appearance:none;
  border:none;
  background: transparent;
  color: var(--fg);
  font-size: 22px;
  padding: 10px 12px;
  border-radius: 999px;
  cursor:pointer;
  transition: transform .12s ease, background .12s ease;
}
.iconBtn:hover{ background: var(--accent); }
.iconBtn:active{ transform: scale(.98); }
.iconBtn--ghost:hover{ background: rgba(0,0,0,.06); }

.quickVisuals{
  display:flex;
  gap:8px;
  align-items:center;
}

.selectMini{
  border:none;
  background: rgba(255,255,255,.55);
  color: var(--fg);
  padding: 10px 12px;
  border-radius: 999px;
  font-weight: 700;
  outline:none;
  cursor:pointer;
}
.selectMini:focus{
  box-shadow: 0 0 0 3px rgba(205,120,60,.22);
}

/* ===== Layout main ===== */
.app{
  padding-top: 92px;
  min-height: 100vh;
}

.hub{
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 18px 18px 40px;
}

@media (min-width: 1200px){
  .hub{ max-width: 1400px; }
}

/* ===== Progress ===== */
.progressWrap{
  padding: 18px 12px 10px;
}

.progressBar{
  position:relative;
  height: var(--barH);
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255,255,255,.55), rgba(255,255,255,.22));
  overflow:hidden;

  border: 1px solid var(--line);
}

.progressFill{
  position:absolute;
  inset:0;
  width: 100%;
  background:
    linear-gradient(180deg, rgba(255,255,255,.38), rgba(255,255,255,.08)),
    linear-gradient(90deg, var(--barFill), rgba(235,160,90,.80));
  box-shadow: inset 0 0 0 2px var(--barEdge);
  transition: width .40s ease;
}

.progressPct{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight: 800;
  letter-spacing: .04em;
  color: rgba(255,255,255,.88);
  text-shadow: 0 1px 0 rgba(0,0,0,.20);
  pointer-events:none;
}

/* ===== Pomodoro ===== */
.pomo{
  margin: 10px auto 12px;
  max-width: 520px;
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: var(--radius2);
  padding: 14px 16px;
}

.pomoTop{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
}
.pomoTime{
  font-weight: 900;
  font-size: 44px;
  letter-spacing: .06em;
}
.pomoBtns{
  margin-top: 10px;
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
}

/* ===== Current task ===== */
.current{
  margin: 14px auto 8px;
  max-width: 900px;
  text-align:center;
}
.currentLbl{
  color: rgba(20,18,15,.72);
  font-weight: 700;
}
.currentTitle{
  margin-top: 10px;
  font-weight: 900;
  font-size: clamp(28px, 3.3vw, 44px);
  letter-spacing: .02em;
  text-shadow: 0 2px 0 rgba(0,0,0,.12);
}

/* ===== Actions ===== */
.actions{
  margin: 18px auto 8px;
  max-width: 920px;

  display:grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 16px;
  align-items:start;
}

.actionCol{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap: 10px;
}

.actionBtn{
  width: 78px;
  height: 78px;
  border-radius: 24px;
  border: 1px solid var(--line);
  background: var(--card);
  cursor:pointer;
  font-size: 34px;
  display:flex;
  align-items:center;
  justify-content:center;
  transition: transform .12s ease, background .12s ease;
}
.actionBtn:hover{ background: var(--card2); }
.actionBtn:active{ transform: scale(.98); }

.actionBtn--bomb{
  background: linear-gradient(180deg, rgba(255,255,255,.65), rgba(255,255,255,.28));
}

.actionLbl{
  text-align:center;
  font-weight: 800;
  color: rgba(20,18,15,.78);
}
.eth{ font-weight: 900; }

.roulette{
  width: 118px;
  height: 118px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: var(--card);
  cursor:pointer;
  display:grid;
  place-items:center;
  overflow:hidden;
  transition: transform .12s ease;
}
.roulette:active{ transform: scale(.99); }

.rouletteFace{
  width: 100%;
  height: 100%;
  border-radius: 999px;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.68), rgba(255,255,255,.02)),
    conic-gradient(from 0deg,
      rgba(205,120,60,.30) 0 18deg,
      rgba(255,255,255,.40) 18deg 36deg,
      rgba(205,120,60,.30) 36deg 54deg,
      rgba(255,255,255,.40) 54deg 72deg,
      rgba(205,120,60,.30) 72deg 90deg,
      rgba(255,255,255,.40) 90deg 108deg,
      rgba(205,120,60,.30) 108deg 126deg,
      rgba(255,255,255,.40) 126deg 144deg,
      rgba(205,120,60,.30) 144deg 162deg,
      rgba(255,255,255,.40) 162deg 180deg,
      rgba(205,120,60,.30) 180deg 198deg,
      rgba(255,255,255,.40) 198deg 216deg,
      rgba(205,120,60,.30) 216deg 234deg,
      rgba(255,255,255,.40) 234deg 252deg,
      rgba(205,120,60,.30) 252deg 270deg,
      rgba(255,255,255,.40) 270deg 288deg,
      rgba(205,120,60,.30) 288deg 306deg,
      rgba(255,255,255,.40) 306deg 324deg,
      rgba(205,120,60,.30) 324deg 342deg,
      rgba(255,255,255,.40) 342deg 360deg
    );
  display:grid;
  place-items:center;
  transition: transform 1.4s cubic-bezier(.1,.85,.2,1);
}

.roulette.spinning .rouletteFace{
  transform: rotate(var(--spin, 0deg));
}

.rouletteTxt{
  font-weight: 900;
  letter-spacing:.06em;
  padding: 10px 14px;
  border-radius: 999px;
  background: rgba(255,255,255,.62);
  border: 1px solid rgba(0,0,0,.08);
}

/* ===== Micro hint ===== */
.micro{
  text-align:center;
  margin-top: 10px;
  color: rgba(20,18,15,.62);
  font-weight: 700;
}

/* ===== Generic controls ===== */
.btn{
  appearance:none;
  border:none;
  background: rgba(205,120,60,.28);
  color: var(--fg);
  padding: 10px 14px;
  border-radius: 999px;
  font-weight: 800;
  cursor:pointer;
  transition: transform .12s ease, background .12s ease;
}
.btn:hover{ background: rgba(205,120,60,.36); }
.btn:active{ transform: scale(.99); }

.btn--ghost{
  background: transparent;
  border: 1px solid var(--line);
}
.btn--ghost:hover{ background: rgba(0,0,0,.04); }

.input, .select, .textarea{
  width: 100%;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid var(--line);
  outline:none;
  background: rgba(255,255,255,.70);
  color: var(--fg);
  font-weight: 700;
}
.textarea{ resize: vertical; }
.select{ cursor:pointer; }

.row{
  display:flex;
  gap:10px;
  align-items:center;
  margin-top: 10px;
}
.row--wrap{ flex-wrap:wrap; }
.row--end{ justify-content:flex-end; }

.stack{ display:flex; flex-direction:column; gap:10px; margin-top:10px; }

.hint{
  font-weight:700;
  color: rgba(20,18,15,.72);
  background: rgba(255,255,255,.38);
  border: 1px solid rgba(0,0,0,.06);
  padding: 10px 12px;
  border-radius: var(--radius);
}

.pill{
  display:flex;
  gap:10px;
  align-items:center;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,.06);
  background: rgba(255,255,255,.40);
  font-weight: 800;
}

/* ===== Panels ===== */
.backdrop{
  position:fixed;
  inset:0;
  background: rgba(0,0,0,.22);
  opacity:0;
  pointer-events:none;
  transition: opacity .18s ease;
  z-index: 5900;
}

.backdrop.show{
  opacity:1;
  pointer-events:auto;
}

.panel{
  position:fixed;
  top: 0;
  bottom: 0;
  width: var(--leftW);
  max-width: 92vw;

  background: linear-gradient(180deg, rgba(255,255,255,.62), rgba(255,255,255,.44));
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  border: 1px solid var(--line);
  z-index: 6000; /* IMPORTANT : au-dessus de la topbar */

  transform: translateX(-105%);
  transition: transform .22s ease;
  display:flex;
  flex-direction:column;
}

.panel-right{
  width: var(--rightW);
  transform: translateX(105%);
}

.panel.open.panel-left{ transform: translateX(0); left:0; }
.panel.open.panel-right{ transform: translateX(0); right:0; }

.panel__header{
  padding: 14px 14px 10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom: 1px solid rgba(0,0,0,.06);
}

.panel__title{
  font-weight: 900;
  letter-spacing: .04em;
}

.panel__tabs{
  padding: 10px 10px 6px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

.tabBtn{
  border:none;
  background: transparent;
  padding: 8px 10px;
  border-radius: 999px;
  color: rgba(20,18,15,.78);
  font-weight: 800;
  cursor:pointer;
}
.tabBtn:hover{ background: rgba(0,0,0,.04); }
.tabBtn.active{
  background: var(--accent);
  color: rgba(20,18,15,.92);
}

.panel__content{
  padding: 12px;
  overflow:auto;
  color: rgba(20,18,15,.82);
}

.tabPane{ display:none; }
.tabPane.show{ display:block; }

.list{
  margin-top: 10px;
  display:flex;
  flex-direction:column;
  gap: 10px;
}

.item{
  background: rgba(255,255,255,.60);
  border: 1px solid rgba(0,0,0,.06);
  border-radius: var(--radius);
  padding: 10px 12px;
  display:flex;
  justify-content:space-between;
  gap:12px;
  align-items:center;
}
.itemTitle{
  font-weight: 900;
}
.itemMeta{
  font-weight:800;
  color: rgba(20,18,15,.62);
  white-space:nowrap;
}
.itemBtns{
  display:flex;
  gap:8px;
}
.miniBtn{
  border:none;
  background: rgba(0,0,0,.04);
  border-radius: 12px;
  padding: 8px 10px;
  cursor:pointer;
  font-weight:900;
}
.miniBtn:hover{ background: rgba(0,0,0,.07); }

/* Habits compact */
.habitList{
  margin-top: 10px;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.habitRow{
  display:flex;
  align-items:center;
  gap:10px;
  padding: 10px 12px;
  background: rgba(255,255,255,.60);
  border: 1px solid rgba(0,0,0,.06);
  border-radius: var(--radius);
}
.habitName{
  flex: 1;
  font-weight: 900;
}
.habitBoxes{
  display:flex;
  gap:6px;
}
.hBox{
  width: 18px;
  height: 18px;
  border-radius: 6px;
  border: 1px solid rgba(0,0,0,.12);
  background: rgba(255,255,255,.64);
  cursor:pointer;
}
.hBox.on{
  background: rgba(205,120,60,.42);
  border-color: rgba(205,120,60,.42);
}
.habitOps{
  display:flex;
  gap:6px;
}

/* Resizers */
.panelResizer{
  position:absolute;
  top:0; bottom:0;
  width: 8px;
  cursor: ew-resize;
  background: transparent;
}
.panelResizer--right{ right:0; }
.panelResizer--left{ left:0; }

/* ===== Modals ===== */
.modal{
  position:fixed;
  inset:0;
  display:none;
  z-index: 7000;
}
.modal.show{ display:block; }

.modalBack{
  position:absolute;
  inset:0;
  background: rgba(0,0,0,.22);
}

.modalCard{
  position:relative;
  width:min(560px, 92vw);
  margin: 120px auto 0;
  background: rgba(255,255,255,.80);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(0,0,0,.08);
  border-radius: var(--radius2);
  padding: 14px 14px 12px;
  z-index: 1;
}

.modalTitle{
  font-weight: 900;
  font-size: 20px;
  margin-bottom: 10px;
}

.grid2{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:10px;
}
@media (max-width:520px){
  .grid2{ grid-template-columns: 1fr; }
}

.field{
  display:flex;
  flex-direction:column;
  gap:6px;
  font-weight: 800;
  color: rgba(20,18,15,.78);
}
.field--row{
  flex-direction:row;
  align-items:center;
  gap:10px;
}

.pickBody{
  display:flex;
  flex-wrap:wrap;
  gap: 8px;
}
.pickOpt{
  border:none;
  background: rgba(205,120,60,.20);
  padding: 10px 12px;
  border-radius: 999px;
  cursor:pointer;
  font-weight: 900;
}
.pickOpt:hover{ background: rgba(205,120,60,.28); }

/* ===== Celebration ===== */
.celebrate{
  position:fixed;
  inset:0;
  display:none;
  z-index: 8000;
}
.celebrate.show{ display:block; }

.celebrate__card{
  position:relative;
  width:min(760px, 92vw);
  margin: 140px auto 0;
  padding: 18px 16px;
  border-radius: var(--radius2);
  background: rgba(255,255,255,.70);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(0,0,0,.08);
  text-align:center;
  z-index: 2;
}

.celebrate__rank{
  font-weight: 900;
  letter-spacing: .12em;
  font-size: 26px;
}
.celebrate__text{
  margin-top: 10px;
  font-weight: 900;
  font-size: 22px;
}
.celebrate__sub{
  margin-top: 10px;
  font-weight: 800;
  color: rgba(20,18,15,.68);
}

.fxCanvas{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  z-index: 1;
  pointer-events:none;
}

/* ===== Code box ===== */
.codeBox{
  margin-top: 10px;
  background: rgba(255,255,255,.55);
  border: 1px solid rgba(0,0,0,.06);
  border-radius: var(--radius);
  padding: 10px 12px;
  overflow:auto;
  max-height: 260px;
}

/* ===== Dark mode tweaks applied by JS variables ===== */
/* ===== PATCH: Title thicker WITHOUT changing font ===== */
.brand__title,
#appTitle,
.appTitle,
.logoTitle {
  font-weight: 900;               /* <- rend plus épais */
  letter-spacing: 0.05em;
  /* optionnel si la font ne grossit pas assez : */
  /* text-shadow: 0 1px 0 rgba(0,0,0,.10); */
}

/* ===== PATCH: Topbar always above main content ===== */
#topBar, .topbar, header.topbar {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 5000;
}

/* ===== PATCH: Backdrop for panels (click to close) ===== */
#panelBack, .panelBack, .backdrop {
  position: fixed;
  inset: 0;
  z-index: 5900;         /* below panels, above topbar */
  background: rgba(0,0,0,.22);
  opacity: 0;
  pointer-events: none;
  transition: opacity .18s ease;
}
#panelBack.show, .panelBack.show, .backdrop.show {
  opacity: 1;
  pointer-events: auto;
}

/* ===== PATCH: Panels ALWAYS ABOVE topbar + never "inside" hub layout ===== */
#leftPanel, #rightPanel,
.leftPanel, .rightPanel,
.panel {
  position: fixed !important;
  top: 0 !important;
  bottom: 0 !important;
  z-index: 6000 !important;  /* above topbar */
  overflow: auto;
  contain: paint;            /* évite certains glitches */
}

/* ===== PATCH: Slide-in behavior (avoid weird transforms) ===== */
#leftPanel, .panel-left {
  left: 0;
  transform: translateX(-105%);
  transition: transform .22s ease;
}
#rightPanel, .panel-right {
  right: 0;
  transform: translateX(105%);
  transition: transform .22s ease;
}
#leftPanel.open, .panel-left.open { transform: translateX(0); }
#rightPanel.open, .panel-right.open { transform: translateX(0); }

/* ===== PATCH: Resizers visible + working (if you already had them) ===== */
#leftResizer, .leftResizer, .panelResizer--right {
  position: absolute;
  top: 0; bottom: 0;
  right: 0;
  width: 10px;
  cursor: ew-resize;
}
#rightResizer, .rightResizer, .panelResizer--left {
  position: absolute;
  top: 0; bottom: 0;
  left: 0;
  width: 10px;
  cursor: ew-resize;
}

/* ===== PATCH: Avoid panels being clipped by parent transforms ===== */
/* Si un parent du body a un transform, les fixed peuvent bugger.
   On neutralise les transforms fréquents sur wrappers. */
#app, .app, main.app, .hubWrap, .layout {
  transform: none !important;
}
